<!doctype html><html><head><meta http-equiv=x-ua-compatible content="ie=edge"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Who"><meta name=keywords content="theme,kagome"><meta name=generator content="Hugo 0.103.0"><title>Spring Cloud Config ğŸŒŸ åˆ†24æœŸä¹°æ³¡é¢ğŸœ</title><meta property="og:title" content="Spring Cloud Config"><meta property="og:description" content="Spring Cloud Config Introduction Spring Cloud Configä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¤–éƒ¨åŒ–é…ç½®æä¾›æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯æ”¯æŒã€‚ä½¿ç”¨Config Serverï¼Œæ‚¨å¯ä»¥åœ¨æ‰€æœ‰ç¯å¢ƒä¸­ç®¡ç†åº”ç”¨ç¨‹åºçš„å¤–"><meta property="og:type" content="article"><meta property="og:url" content="https://onlw.github.io/posts/201909010000/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-09-01T00:00:00+00:00"><meta property="article:modified_time" content="2019-09-01T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Spring Cloud Config"><meta name=twitter:description content="Spring Cloud Config Introduction Spring Cloud Configä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¤–éƒ¨åŒ–é…ç½®æä¾›æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯æ”¯æŒã€‚ä½¿ç”¨Config Serverï¼Œæ‚¨å¯ä»¥åœ¨æ‰€æœ‰ç¯å¢ƒä¸­ç®¡ç†åº”ç”¨ç¨‹åºçš„å¤–"><link rel=stylesheet href=https://onlw.github.io/assets/css/style.min.699f46622e3574a7f9ecca4c5877067845fe89ffcd9c4335df2dff23ddae215e.css integrity="sha256-aZ9GYi41dKf57MpMWHcGeEX+if/NnEM13y3/I92uIV4="><script src=https://onlw.github.io/assets/js/main.min.182da266209851bc7c828aa7377f98f914e1e76c8decdd53a6cbe9bffea92cde.js integrity="sha256-GC2iZiCYUbx8goqnN3+Y+RTh52yN7N1Tpsvpv/6pLN4="></script></head><body><header class="header-container layout-block layout-padding"><div class="header-inner content-padding-large soft-size--large soft-style--box"><div class=header-logo><a href=https://onlw.github.io/><h1>åˆ†24æœŸä¹°æ³¡é¢ğŸœ</h1></a></div><nav class=header-nav><div class=header-nav--btn><div class=btn-item></div><div class=btn-item></div><div class=btn-item></div></div><div class=header-nav--list><div><a class="list-item soft-size--small soft-style--hover soft-style--active" href=/ title>HOME</a>
<a class="list-item soft-size--small soft-style--hover soft-style--active" href=/posts title>POSTS</a>
<a class="list-item soft-size--small soft-style--hover soft-style--active" href=/message title>MESSAGE</a>
<a class="list-item soft-size--small soft-style--hover soft-style--active" href=/link title>LINK</a></div></div></nav></div></header><main id=content><div class="single-container layout-block"><div class=article-info><div class="article-header layout-padding"><div class="article-cover card-container content-padding-large soft-size--large soft-style--box"><div class=card-cover></div><div class=card-text><h1 class=card-text--title>Spring Cloud Config</h1><p class=card-text--row>2019-09-01 00:00</p><ul class=card-text--tag><li><a href=https://onlw.github.io/categories/program/>program</a></li></ul><ul class=card-text--tag><li><a href=https://onlw.github.io/tags/spring-cloud/>spring-cloud</a></li></ul></div></div></div><div class=article-content><div class="markdown-body content-padding-large soft-size--large soft-style--box"><h1 id=spring-cloud-config>Spring Cloud Config</h1><h2 id=introduction>Introduction</h2><p>Spring Cloud Configä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¤–éƒ¨åŒ–é…ç½®æä¾›æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯æ”¯æŒã€‚ä½¿ç”¨Config Serverï¼Œæ‚¨å¯ä»¥åœ¨æ‰€æœ‰ç¯å¢ƒä¸­ç®¡ç†åº”ç”¨ç¨‹åºçš„å¤–éƒ¨å±æ€§ã€‚å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¸Šçš„æ¦‚å¿µæ˜ å°„ä¸Spring Environmentå’ŒPropertySourceæŠ½è±¡ï¼Œå› æ­¤å®ƒä»¬éå¸¸é€‚åˆSpringåº”ç”¨ç¨‹åºï¼Œä½†å¯ä»¥ä¸ä»»ä½•è¯­è¨€è¿è¡Œçš„ä»»ä½•åº”ç”¨ç¨‹åºä¸€èµ·ä½¿ç”¨ã€‚å½“åº”ç”¨ç¨‹åºé€šè¿‡éƒ¨ç½²ç®¡é“ä»å¼€å‘åˆ°æµ‹è¯•å†åˆ°ç”Ÿäº§æ—¶ï¼Œæ‚¨å¯ä»¥ç®¡ç†è¿™äº›ç¯å¢ƒä¹‹é—´çš„é…ç½®ï¼Œå¹¶ç¡®ä¿åº”ç”¨ç¨‹åºå…·æœ‰è¿ç§»æ—¶éœ€è¦è¿è¡Œçš„æ‰€æœ‰å†…å®¹ã€‚æœåŠ¡å™¨å­˜å‚¨åç«¯çš„é»˜è®¤å®ç°ä½¿ç”¨gitï¼Œå› æ­¤å®ƒå¯ä»¥è½»æ¾æ”¯æŒé…ç½®ç¯å¢ƒçš„æ ‡ç­¾ç‰ˆæœ¬ï¼Œä»¥åŠå¯ç”¨äºç®¡ç†å†…å®¹çš„å„ç§å·¥å…·ã€‚æ·»åŠ æ›¿ä»£å®ç°å¹¶ä½¿ç”¨Springé…ç½®æ’å…¥å®ƒä»¬å¾ˆå®¹æ˜“ã€‚</p><h2 id=development-environment>Development Environment</h2><ul><li>Spring Boot : 2.1.7</li><li>gradle : 5.6</li><li>Java : jdk1.8</li></ul><h2 id=key-words>Key Words</h2><ul><li>Config Server</li><li>Config Client</li><li>bootstrap.[yml | properties]</li><li>zookeeper</li><li>vault</li><li>consul</li></ul><h2 id=build-config-server>Build Config Server</h2><h3 id=é…ç½®gradle>é…ç½®Gradle</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>    implementation <span style=color:#e6db74>&#39;org.springframework.boot:spring-boot-starter-web&#39;</span>
</span></span><span style=display:flex><span>    implementation <span style=color:#e6db74>&#39;org.springframework.cloud:spring-cloud-config-server&#39;</span>
</span></span><span style=display:flex><span>    implementation <span style=color:#e6db74>&#39;org.springframework.cloud:spring-cloud-function-web&#39;</span>
</span></span><span style=display:flex><span>    implementation <span style=color:#e6db74>&#39;org.springframework.cloud:spring-cloud-starter&#39;</span>
</span></span><span style=display:flex><span>    implementation <span style=color:#e6db74>&#39;org.springframework.cloud:spring-cloud-starter-task&#39;</span>
</span></span><span style=display:flex><span>    compileOnly <span style=color:#e6db74>&#39;org.projectlombok:lombok&#39;</span>
</span></span><span style=display:flex><span>    developmentOnly <span style=color:#e6db74>&#39;org.springframework.boot:spring-boot-devtools&#39;</span>
</span></span><span style=display:flex><span>    annotationProcessor <span style=color:#e6db74>&#39;org.springframework.boot:spring-boot-configuration-processor&#39;</span>
</span></span><span style=display:flex><span>    annotationProcessor <span style=color:#e6db74>&#39;org.projectlombok:lombok&#39;</span>
</span></span><span style=display:flex><span>    testImplementation <span style=color:#e6db74>&#39;org.springframework.boot:spring-boot-starter-test&#39;</span>
</span></span></code></pre></div><h3 id=é…ç½®-applicationproperties>é…ç½® application.properties</h3><pre tabindex=0><code class=language-properties data-lang=properties>server.port=8081
spring.cloud.config.server.git.uri=https://github.com/spaco/spring-cloud-config-repo-samples
</code></pre><p>gitä»“åº“æ–‡ä»¶å¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash></code></pre></div><h3 id=é…ç½®å¯åŠ¨å™¨>é…ç½®å¯åŠ¨å™¨</h3><p><code>ä¸»è¦æ˜¯@EnableConfigServeræ³¨è§£</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@SpringBootApplication</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@EnableConfigServer</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ConfigServerApplication</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>		SpringApplication<span style=color:#f92672>.</span><span style=color:#a6e22e>run</span><span style=color:#f92672>(</span>ConfigServerApplication<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> args<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h3 id=å¯åŠ¨æœåŠ¡>å¯åŠ¨æœåŠ¡</h3><h3 id=test-cases>Test Cases</h3><p>åœ¨æµ‹è¯•ä¹‹å‰ï¼Œå¼€å‘è€…éœ€è¦çŸ¥é“Config Serverå¯»æ‰¾é…ç½®æ–‡ä»¶çš„è§„åˆ™</p><p>å¼€å‘è€…è¯·æ±‚ Config Server çš„ç«¯ç‚¹å¯ä»¥è·å–é…ç½®æ–‡ä»¶çš„å†…å®¹ï¼Œè¯·æ±‚åœ°å€ä¸é…ç½®æ–‡ä»¶çš„æ˜ å°„å¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/<span style=color:#f92672>{</span>application<span style=color:#f92672>}</span>/<span style=color:#f92672>{</span>profile<span style=color:#f92672>}[</span>/<span style=color:#f92672>{</span>label<span style=color:#f92672>}]</span>
</span></span><span style=display:flex><span>/<span style=color:#f92672>{</span>application<span style=color:#f92672>}</span>-<span style=color:#f92672>{</span>profile<span style=color:#f92672>}</span>.yml
</span></span><span style=display:flex><span>/<span style=color:#f92672>{</span>label<span style=color:#f92672>}</span>/<span style=color:#f92672>{</span>application<span style=color:#f92672>}</span>-<span style=color:#f92672>{</span>profile<span style=color:#f92672>}</span>.yml
</span></span><span style=display:flex><span>/<span style=color:#f92672>{</span>application<span style=color:#f92672>}</span>-<span style=color:#f92672>{</span>profile<span style=color:#f92672>}</span>.properties
</span></span><span style=display:flex><span>/<span style=color:#f92672>{</span>label<span style=color:#f92672>}</span>/<span style=color:#f92672>{</span>application<span style=color:#f92672>}</span>-<span style=color:#f92672>{</span>profile<span style=color:#f92672>}</span>.properties
</span></span></code></pre></div><p>application profile labelåˆ†åˆ«å¯¹åº”ç€ä»€ä¹ˆå‘¢ï¼Ÿ</p><ul><li>application æ„å‘³ç€é¡¹ç›®åç§°ï¼Œå¯ä»¥é€šè¿‡<code>spring.cloud.config.name</code>é…ç½®ä¿®æ”¹</li><li>profile æ„å‘³ç€é¡¹ç›®ç¯å¢ƒï¼Œæµ‹è¯•æœå¯ä»¥é…ç½®ä¸º<code>dev</code>ï¼Œæ­£å¼æœå¯ä»¥é…ç½®ä¸º<code>pro</code>ï¼Œå¯ä»¥é€šè¿‡<code>spring.cloud.config.profile</code>é…ç½®ä¿®æ”¹</li><li>label æ„å‘³ç€git åˆ†æ”¯ç‰ˆæœ¬ï¼Œå¦‚æœæ˜¯ä½¿ç”¨çš„é…ç½®æ–‡ä»¶æ˜¯æœ¬åœ°ï¼Œé‚£ä¹ˆæ˜¯æ— æ•ˆçš„ï¼Œå¯ä»¥é€šè¿‡<code>spring.cloud.config.label</code>é…ç½®ä¿®æ”¹ï¼Œé»˜è®¤æ˜¯ <code>master</code></li></ul><p><strong>è·å–é…ç½®æ–‡ä»¶æˆ‘ä»¬é‡‡ç”¨ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§@Value,ä¸€ç§Environment</strong></p><h4 id=test-1-è¯·æ±‚-applicationprofile>Test 1 ï¼šè¯·æ±‚ application+profile</h4><p><code>curl localhost:8081/config-client/dev</code></p><pre tabindex=0><code class=language-properties data-lang=properties>application = config-client
profile = dev
</code></pre><p>è¯·æ±‚ç»“æœå¦‚ä¸‹</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;config-client&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;profiles&#34;</span>: [
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;dev&#34;</span>
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;label&#34;</span>: <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;version&#34;</span>: <span style=color:#e6db74>&#34;dd39228cf1b62a2a12f6afb26fc49dda0d8cd451&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;state&#34;</span>: <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;propertySources&#34;</span>: [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;https://github.com/spaco/spring-cloud-config-repo-samples/config-client-dev.properties&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;source&#34;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#f92672>&#34;filename&#34;</span>: <span style=color:#e6db74>&#34;config-client-dev.properties&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f92672>&#34;config-client-dev.properties&#34;</span>: <span style=color:#e6db74>&#34;config-client-dev.properties&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f92672>&#34;config-client-dev.unique&#34;</span>: <span style=color:#e6db74>&#34;config-client-dev.properties&#34;</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;https://github.com/spaco/spring-cloud-config-repo-samples/config-client-dev.yml&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;source&#34;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#f92672>&#34;filename&#34;</span>: <span style=color:#e6db74>&#34;config-client-dev.yml&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f92672>&#34;config-client-dev.yml&#34;</span>: <span style=color:#e6db74>&#34;config-client-dev.yml&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f92672>&#34;config-client-dev.unique&#34;</span>: <span style=color:#e6db74>&#34;config-client-dev.yml&#34;</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;https://github.com/spaco/spring-cloud-config-repo-samples/config-client.properties&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;source&#34;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#f92672>&#34;filename&#34;</span>: <span style=color:#e6db74>&#34;config-client.properties&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f92672>&#34;config-client.properties&#34;</span>: <span style=color:#e6db74>&#34;config-client.properties&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f92672>&#34;config-client.unique&#34;</span>: <span style=color:#e6db74>&#34;config-client.properties&#34;</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;https://github.com/spaco/spring-cloud-config-repo-samples/config-client.yml&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;source&#34;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#f92672>&#34;filename&#34;</span>: <span style=color:#e6db74>&#34;config-client.yml&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f92672>&#34;config-client.yml&#34;</span>: <span style=color:#e6db74>&#34;config-client.yml&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f92672>&#34;config-client.unique&#34;</span>: <span style=color:#e6db74>&#34;config-client.yml&#34;</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>æ€»ç»“ï¼šå…±è·å¾— <code>config-client-dev.properties</code> <code>config-client-dev.yml</code> <code>config-client.properties</code> <code>config-client.yml</code> çš„é…ç½®ä¿¡æ¯ï¼Œä¸ä»…ä¼šå¾—åˆ°é…ç½®ä¿¡æ¯ï¼Œè¿˜å­˜åœ¨ git ç‰ˆæœ¬ä¿¡æ¯</p><h4 id=test-2-è¯·æ±‚-applicationprofileæŒ‡å®šæ–‡ä»¶-yml--properties>Test 2 ï¼šè¯·æ±‚ application+profileæŒ‡å®šæ–‡ä»¶ .yml | .properties</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl localhost:8081/config-client-dev.yml
</span></span></code></pre></div><p>è¯·æ±‚ç»“æœå¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>config-client-dev:
</span></span><span style=display:flex><span>  properties: config-client-dev.properties
</span></span><span style=display:flex><span>  unique: config-client-dev.properties
</span></span><span style=display:flex><span>  yml: config-client-dev.yml
</span></span><span style=display:flex><span>config-client:
</span></span><span style=display:flex><span>  properties: config-client.properties
</span></span><span style=display:flex><span>  unique: config-client.properties
</span></span><span style=display:flex><span>  yml: config-client.yml
</span></span><span style=display:flex><span>filename: config-client-dev.properties
</span></span></code></pre></div><p>æ€»ç»“ï¼š å…±è·å¾— <code>config-client-dev.properties</code> <code>config-client-dev.yml</code> <code>config-client.properties</code> <code>config-client.yml</code> çš„é…ç½®ä¿¡æ¯ã€‚<strong>.properties ä¼šè¦†ç›– .yml é…ç½®ä¿¡æ¯</strong>ï¼Œ<strong>è¯·æ±‚æŒ‡å®šæ–‡ä»¶åŠŸèƒ½æ— æ•ˆ</strong>ï¼Œå½“ç„¶ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œä¸ä¼šå­˜åœ¨ .yml ä¸ .propertieså…±å­˜çš„ç»“æœ</p><h2 id=build-config-client>Build Config Client</h2><p>å½“<code>application.properties</code>é…ç½®<code>spring.profiles.active=dev</code> å¹¶ä¸”æœ¬åœ°é…ç½®æ–‡ä»¶<code>application-dev.properties</code>å­˜åœ¨ï¼Œ<code>application-dev.properties</code>é…ç½®çš„ä¼˜å…ˆçº§æ˜¯ä½äºè¿œç¨‹é…ç½®çš„ï¼Œå³ä¼šè¢«è¦†ç›–</p><h3 id=é…ç½®gradle-1>é…ç½®Gradle</h3><pre tabindex=0><code>dependencies {
    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;
    implementation &#39;org.springframework.cloud:spring-cloud-function-web&#39;
    implementation &#39;org.springframework.cloud:spring-cloud-starter&#39;
    implementation &#39;org.springframework.cloud:spring-cloud-starter-config&#39;
    implementation &#39;org.springframework.cloud:spring-cloud-starter-task&#39;
    compileOnly &#39;org.projectlombok:lombok&#39;
    developmentOnly &#39;org.springframework.boot:spring-boot-devtools&#39;
    annotationProcessor &#39;org.springframework.boot:spring-boot-configuration-processor&#39;
    annotationProcessor &#39;org.projectlombok:lombok&#39;
    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;
}
</code></pre><h3 id=é…ç½®-applicationproperties-1>é…ç½® application.properties</h3><pre tabindex=0><code class=language-properties data-lang=properties>server.port=8082
</code></pre><h3 id=é…ç½®-bootstrapproperties>é…ç½® bootstrap.properties</h3><p><strong>é‡ç‚¹</strong>ï¼š<strong>å…³äº Spring Cloud Config çš„é…ç½®éœ€è¦åœ¨ <code>bootstrap.properties</code>ä¸­é…ç½®</strong></p><pre tabindex=0><code class=language-properties data-lang=properties># é…ç½®ä¸­å¿ƒçš„å…·ä½“åœ°å€ï¼Œå³ config-server
spring.cloud.config.uri=http://localhost:8081
# å¯¹åº” {application} éƒ¨åˆ†
spring.cloud.config.name=config-client
# å¯¹åº” {profile} éƒ¨åˆ†
spring.cloud.config.profile=dev
# å¯¹åº” {label} éƒ¨åˆ†ï¼Œå³ Git çš„åˆ†æ”¯ã€‚å¦‚æœé…ç½®ä¸­å¿ƒä½¿ç”¨çš„æ˜¯æœ¬åœ°å­˜å‚¨ï¼Œåˆ™è¯¥å‚æ•°æ— ç”¨
spring.cloud.config.label=master
</code></pre><p>åŸå› ï¼š</p><pre tabindex=0><code>è€Œç°åœ¨æˆ‘ä»¬æŠŠè·å–é…ç½®å†…å®¹çš„ config client ç›¸å…³é…ç½®æ”¾åœ¨äº† application.properties ä¸­ï¼Œè¿™æ ·æ˜¯ä¸æ˜¯å°±æœ‰ç‚¹ä¸å¯¹äº†ï¼Œå› ä¸ºè¿™é‡Œä¼šå‡ºç°ä¸€ä¸ªå…ˆåé¡ºåºçš„é—®é¢˜ã€‚å¦‚æœæˆ‘ä»¬æŠŠé…ç½®æ”¾åœ¨äº† application.properties ä¸­ï¼Œé‚£ä¹ˆå®ƒä¼šå…ˆå»åŠ è½½ bootstrap.propertiesä¸­ çš„é…ç½®å±æ€§(å¦‚æœæ²¡æœ‰ï¼Œä¼šåŠ è½½é»˜è®¤é…ç½®)ï¼Œå‡å¦‚æˆ‘ä»¬åœ¨ application.properties ä¸­é…ç½®çš„ uri ç«¯å£æ˜¯ 8081ï¼Œé‚£ä¹ˆå®ƒå°†ä¸ä¼šè¢«åº”ç”¨ï¼Œè¿˜æ˜¯é»˜è®¤çš„ 8888 ç«¯å£
</code></pre><pre tabindex=0><code>Spring Cloud æœ‰ä¸€ä¸ª å¼•å¯¼ä¸Šä¸‹æ–‡ çš„æ¦‚å¿µï¼Œå®ƒæ˜¯ä¸»åº”ç”¨ç¨‹åºçš„çˆ¶ä¸Šä¸‹æ–‡ï¼Œè¿™ä¸ªå¼•å¯¼ä¸Šä¸‹æ–‡è´Ÿè´£ä»å¤–éƒ¨æºï¼ˆé…ç½®æœåŠ¡å™¨ï¼Œå¦‚Config Serverï¼‰åŠ è½½é…ç½®å±æ€§ï¼ŒåŠè§£å¯†å¤–éƒ¨é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§ã€‚ä¸»åº”ç”¨ç¨‹åºåŠ è½½çš„æ˜¯ application.(properties/yml) ä¸­çš„å±æ€§ï¼Œå¼•å¯¼ä¸Šä¸‹æ–‡åŠ è½½ bootstrap.(properties/yml) ä¸­çš„å±æ€§ã€‚è¿™ä¸¤ä¸ªä¸Šä¸‹æ–‡å…±äº«ä¸€ä¸ªEnvironmentï¼Œä½†é…ç½®åœ¨ boostrap.* ä¸­çš„å±æ€§æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ï¼Œå› æ­¤é»˜è®¤æƒ…å†µä¸‹ä¸èƒ½è¢«æœ¬åœ°é…ç½®è¦†ç›–ã€‚

è®¾ç½® spring.cloud.bootstrap.enabled=false å¯ä»¥ç¦ç”¨å¼•å¯¼è¿‡ç¨‹
</code></pre><p><strong>ä¸åœ¨bootstrap.propertiesé…ç½®çš„é”™è¯¯ç¤ºä¾‹</strong></p><pre tabindex=0><code class=language-properties data-lang=properties># å°†æ‰€æœ‰é…ç½®é¡¹ å†™å…¥application.propertiesä¸­
server.port=8082

# é…ç½®ä¸­å¿ƒçš„å…·ä½“åœ°å€ï¼Œå³ config-server
spring.cloud.config.uri=http://localhost:8081
# å¯¹åº” {application} éƒ¨åˆ†
spring.cloud.config.name=config-client
# å¯¹åº” {profile} éƒ¨åˆ†
spring.cloud.config.profile=dev
# å¯¹åº” {label} éƒ¨åˆ†ï¼Œå³ Git çš„åˆ†æ”¯ã€‚å¦‚æœé…ç½®ä¸­å¿ƒä½¿ç”¨çš„æ˜¯æœ¬åœ°å­˜å‚¨ï¼Œåˆ™è¯¥å‚æ•°æ— ç”¨
spring.cloud.config.label=master
</code></pre><p>é¡¹ç›®ç¼–è¯‘æ—¶ä¼šæŠ¥é”™ï¼šæ‰¾ä¸åˆ°ç›®æ ‡æ–‡ä»¶ï¼Œé»˜è®¤å¯åŠ¨8888ç«¯å£</p><pre tabindex=0><code>c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for &#34;http://localhost:8888/config-client/dev/master&#34;: Connection refused (Connection refused); nested exception is java.net.ConnectException: Connection refused (Connection refused)
c.s.c.ConfigClientApplication: No active profile set, falling back to default profiles: default
</code></pre><h3 id=æ§åˆ¶å™¨>æ§åˆ¶å™¨</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> com.spaco.configclient<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.beans.factory.annotation.Value<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.core.env.Environment<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.web.bind.annotation.GetMapping<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.web.bind.annotation.RestController<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@RestController</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>IndexController</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Value</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;${filename}&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String filename<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> Environment environment<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>IndexController</span><span style=color:#f92672>(</span>Environment environment<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>environment</span> <span style=color:#f92672>=</span> environment<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@GetMapping</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;/filename&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>filename</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;filename is :&#34;</span><span style=color:#f92672>+</span>filename<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@GetMapping</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;/filename-env&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>filename_env</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> environment<span style=color:#f92672>.</span><span style=color:#a6e22e>getProperty</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;filename&#34;</span><span style=color:#f92672>,</span><span style=color:#e6db74>&#34;undefine&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h3 id=å¯åŠ¨æœåŠ¡-1>å¯åŠ¨æœåŠ¡</h3><p>å¯åŠ¨å†…å®¹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>Fetching config from server at : http://localhost:8081
</span></span><span style=display:flex><span>Located environment: name<span style=color:#f92672>=</span>config-client, profiles<span style=color:#f92672>=[</span>dev<span style=color:#f92672>]</span>, label<span style=color:#f92672>=</span>master, version<span style=color:#f92672>=</span>dd39228cf1b62a2a12f6afb26fc49dda0d8cd451, state<span style=color:#f92672>=</span>null
</span></span><span style=display:flex><span>Located property source: CompositePropertySource <span style=color:#f92672>{</span>name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;configService&#39;</span>, propertySources<span style=color:#f92672>=[</span>MapPropertySource <span style=color:#f92672>{</span>name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;configClient&#39;</span><span style=color:#f92672>}</span>, MapPropertySource <span style=color:#f92672>{</span>name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;https://github.com/spaco/spring-cloud-config-repo-samples/config-client-dev.properties&#39;</span><span style=color:#f92672>}</span>, MapPropertySource <span style=color:#f92672>{</span>name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;https://github.com/spaco/spring-cloud-config-repo-samples/config-client-dev.yml&#39;</span><span style=color:#f92672>}</span>, MapPropertySource <span style=color:#f92672>{</span>name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;https://github.com/spaco/spring-cloud-config-repo-samples/config-client.properties&#39;</span><span style=color:#f92672>}</span>, MapPropertySource <span style=color:#f92672>{</span>name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;https://github.com/spaco/spring-cloud-config-repo-samples/config-client.yml&#39;</span><span style=color:#f92672>}]}</span>
</span></span><span style=display:flex><span>No active profile set, falling back to default profiles: default
</span></span></code></pre></div><h3 id=test-cases-1>Test Cases</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl localhost:8082/filename
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>filename is :config-client-dev.properties
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl localhost:8082/filename-env
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>config-client-dev.properties
</span></span></code></pre></div><h2 id=config-refresh--manual>Config Refresh ï¼š Manual</h2><p>Spring Cloud configå¼ºå¤§çš„åœ°æ–¹å°±åœ¨å¯ä»¥åŠ¨æ€åˆ·æ–°æœåŠ¡çš„é…ç½®ä¿¡æ¯ã€‚ç„¶è€Œï¼ŒSpring Bootåº”ç”¨åªèƒ½åœ¨æœåŠ¡å¯åŠ¨çš„æ—¶å€™æ‰èƒ½åŠ è½½å®ƒä»¬çš„é…ç½®ä¿¡æ¯ï¼Œæ‰€ä»¥åœ¨Config Serverå¯¹æœåŠ¡çš„é…ç½®åšå‡ºçš„å˜æ›´ï¼ŒConfig Client æœåŠ¡æ²¡åŠæ³•ä¸»åŠ¨å»è·å–æ–°çš„é…ç½®ã€‚æ‰€ä»¥Spring Bootæä¾›ä¸€ä¸ª@RefreshScopeæ³¨è§£æ¥è§£å†³è¿™ä¸€é—®é¢˜ï¼Œä½¿ç”¨è¯¥æ³¨è§£åï¼Œå¼€å‘å›¢é˜Ÿå¯ä»¥ä½¿ç”¨<code>/actuator/refresh</code>æ¥è®©åº”ç”¨ä¸»åŠ¨é‡æ–°è¯»å–é…ç½®ä¿¡æ¯ã€‚ä¸‹é¢æ˜¯@RefreshScopeæ³¨è§£çš„ä½¿ç”¨æ–¹æ³•ï¼š</p><h3 id=é…ç½®gradle-2>é…ç½®Gradle</h3><pre tabindex=0><code># å¢åŠ ä¾èµ– spring-boot-starter-actuator
dependencies {
    implementation &#39;org.springframework.boot:spring-boot-starter-actuator&#39;
}
</code></pre><h3 id=é…ç½®-refreshscope-æ³¨è§£äº-config-client-controller>é…ç½® @RefreshScope æ³¨è§£ï¼šäº Config Client Controller</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> com.spaco.configclient<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.beans.factory.annotation.Value<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.core.env.Environment<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.web.bind.annotation.GetMapping<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.web.bind.annotation.RestController<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.cloud.context.config.annotation.RefreshScope<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@RestController</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@RefreshScope</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>IndexController</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Value</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;${filename}&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String filename<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> Environment environment<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>IndexController</span><span style=color:#f92672>(</span>Environment environment<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>environment</span> <span style=color:#f92672>=</span> environment<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@GetMapping</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;/filename&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>filename</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;filename is :&#34;</span><span style=color:#f92672>+</span>filename<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@GetMapping</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;/filename-env&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>filename_env</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> environment<span style=color:#f92672>.</span><span style=color:#a6e22e>getProperty</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;filename&#34;</span><span style=color:#f92672>,</span><span style=color:#e6db74>&#34;undefine&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h3 id=å¯åŠ¨æœåŠ¡-2>å¯åŠ¨æœåŠ¡</h3><h3 id=test-cases-2>Test Cases</h3><p>åœ¨ä¸æ”¹å˜Gité…ç½®çš„æƒ…å†µä¸‹ï¼Œè°ƒå–refeashæ¥å£</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -X POST http://localhost:8082/actuator/refresh
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[]</span>
</span></span></code></pre></div><p>ç»“æœï¼šç©ºæ•°æ®ï¼Œæ— Gité…ç½®ä¿®æ”¹</p><p>è°ƒå– <code>curl localhost:8082/filename</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>filename is :config-client-dev.properties
</span></span></code></pre></div><p>æ›´æ–°<code>config-client-dev.properties</code>é…ç½®æ–‡ä»¶ï¼Œæ›´æ–°<code>filename</code>å±æ€§</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>filename<span style=color:#f92672>=</span>config-client-dev.properties updated
</span></span></code></pre></div><p>è°ƒå–refeashæ¥å£:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -X POST http://localhost:8082/actuator/refresh
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span><span style=color:#e6db74>&#34;config.client.version&#34;</span>,<span style=color:#e6db74>&#34;filename&#34;</span><span style=color:#f92672>]</span>
</span></span></code></pre></div><p>ç»“æœï¼šè¿”å›ä¿®æ”¹çš„å‚æ•°å</p><p>è°ƒå– <code>curl localhost:8082/filename</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>filename is :config-client-dev.properties updated
</span></span></code></pre></div><p>ç»“æœï¼šåœ¨ä¸é‡å¯æœåŠ¡çš„æƒ…å†µä¸‹ï¼Œæ›´æ–°çš„é…ç½®å·²ç”Ÿæ•ˆ</p><h2 id=references>References</h2><ul><li><a href=https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html target=_blank rel=noopener>Actuator endpoints</a></li><li></li></ul></div></div><div class=article-paging><section class="post-paging--item card-container content-padding-primary soft-size--primary soft-style--box"><div class=card-cover></div><div class=card-text><a href=/posts/201909030000/><h4 class="card-text--title text-ellipsis">Spring Cloud Netflix Eureka</h4></a><p class=card-text--row>2019-09-03 00:00</p></div></section><section class="post-paging--item card-container content-padding-primary soft-size--primary soft-style--box"><div class=card-cover></div><div class=card-text><a href=/posts/201908210000/><h4 class="card-text--title text-ellipsis">Java basic grammar</h4></a><p class=card-text--row>2019-08-21 00:00</p></div></section></div></div><aside class=widget-info><section class="aside-widget widget-author content-padding-large soft-size--large soft-style--box"><div class=widget-body><div class="author-box avatar"><img class="author-avatar soft-size--round soft-style--box" src="https://s.gravatar.com/avatar/a0570f9d1887caa3f4e5c9df9706d15d?s=200&r=g&d=retro" alt=Who><h2 class="author-name text-ellipsis">Who</h2><p class="author-desc text-ellipsis">äººç±»çš„æ‚²æ¬¢å¹¶ä¸ç›¸é€š</p></div></div></section><section class="aside-widget widget-articles content-padding-large soft-size--large soft-style--box"><h2 class=widget-header><div class=title><span>Related Posts</span></div></h2><div class=widget-body><ul class=post-list><li class=post-item><a href=/posts/202209182224/>Clickhouse Start</a></li><li class=post-item><a href=/posts/201910100000/>laravel-throttle</a></li><li class=post-item><a href=/posts/201909300000/>spring cloud config source code analysis</a></li><li class=post-item><a href=/posts/201909180000/>Load balancing</a></li><li class=post-item><a href=/posts/201909180000/>Spring Cloud Ribbon</a></li><li class=post-item><a href=/posts/201909170000/>Spring Cloud Stream</a></li></ul></div></section><section class="aside-widget widget-categories content-padding-large soft-size--large soft-style--box"><h2 class=widget-header><div class=title><span>Categories</span></div></h2><div class=widget-body><ul class=categories-list><li><a href=https://onlw.github.io/categories/program/>program</a>
<span>39</span></li><li><a href=https://onlw.github.io/categories/notes/>notes</a>
<span>4</span></li><li><a href=https://onlw.github.io/categories/default/>default</a>
<span>1</span></li><li><a href=https://onlw.github.io/categories/doc/>doc</a>
<span>1</span></li></ul></div></section><section class="aside-widget widget-tags content-padding-large soft-size--large soft-style--box"><h2 class=widget-header><div class=title><span>Tags</span></div></h2><div class=widget-body><div class=tags-list><a href=https://onlw.github.io/tags/spring-cloud/ data-count=5 class="soft-size--small soft-style--hover soft-style--active">spring-cloud</a>
<a href=https://onlw.github.io/tags/laravel/ data-count=4 class="soft-size--small soft-style--hover soft-style--active">laravel</a>
<a href=https://onlw.github.io/tags/mq/ data-count=3 class="soft-size--small soft-style--hover soft-style--active">MQ</a>
<a href=https://onlw.github.io/tags/hexo/ data-count=2 class="soft-size--small soft-style--hover soft-style--active">hexo</a>
<a href=https://onlw.github.io/tags/java/ data-count=2 class="soft-size--small soft-style--hover soft-style--active">java</a>
<a href=https://onlw.github.io/tags/kafka/ data-count=2 class="soft-size--small soft-style--hover soft-style--active">kafka</a>
<a href=https://onlw.github.io/tags/mysql/ data-count=2 class="soft-size--small soft-style--hover soft-style--active">mysql</a>
<a href=https://onlw.github.io/tags/search-engine/ data-count=2 class="soft-size--small soft-style--hover soft-style--active">search-engine</a>
<a href=https://onlw.github.io/tags/software/ data-count=2 class="soft-size--small soft-style--hover soft-style--active">software</a>
<a href=https://onlw.github.io/tags/api-gateway/ data-count=1 class="soft-size--small soft-style--hover soft-style--active">api-gateway</a>
<a href=https://onlw.github.io/tags/clickhouse/ data-count=1 class="soft-size--small soft-style--hover soft-style--active">clickhouse</a>
<a href=https://onlw.github.io/tags/composer/ data-count=1 class="soft-size--small soft-style--hover soft-style--active">composer</a></div></div><div class=widget-footer><a href=https://onlw.github.io/tags/ class="more-link center">show all<svg class="icon icon-more" width="16" height="16" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M60.928 247.808c-13.824-13.824-36.352-13.824-50.688.0-13.824 13.824-13.824 36.352.0 50.688L224.256 512 10.24 725.504c-13.824 13.824-13.824 36.352.0 50.688 7.168 7.168 15.872 10.24 25.088 10.24s18.432-3.584 25.088-10.24L299.52 537.088c13.824-13.824 13.824-36.352.0-50.688L60.928 247.808zm356.864.0c-13.824-13.824-36.352-13.824-50.688.0-13.824 13.824-13.824 36.352.0 50.688L580.608 512 367.104 725.504c-13.824 13.824-13.824 36.352.0 50.688 7.168 7.168 15.872 10.24 25.088 10.24s18.432-3.584 25.088-10.24l239.104-239.104c13.824-13.824 13.824-36.352.0-50.688L417.792 247.808zM1013.76 486.912 774.656 247.808c-13.824-13.824-36.352-13.824-50.688.0-13.824 13.824-13.824 36.352.0 50.688L937.472 512 723.968 725.504c-13.824 13.824-13.824 36.352.0 50.688 7.168 7.168 15.872 10.24 25.088 10.24s18.432-3.584 25.088-10.24l239.104-239.104c14.336-13.824 14.336-36.352.512-50.176z"/></svg></a></div></section></aside></div></main><footer class="footer-container layout-block"><div class=social-icons><a class="soft-size--primary soft-style--box" href=https://github.com/onlw target=_blank rel="noopener noreferrer"><svg class="icon icon-github" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M64.6 512c0 195.6 125.4 361.9 300.1 422.9 23.5 5.9 19.9-10.8 19.9-22.2v-77.6c-135.8 15.9-141.3-74-150.5-89-18.5-31.5-61.9-39.5-49-54.5 31-15.9 62.5 4 98.9 58 26.4 39.1 77.9 32.5 104.1 26 5.7-23.5 17.9-44.5 34.7-60.9-140.7-25.2-199.4-111.1-199.4-213.3.0-49.5 16.4-95.1 48.4-131.8-20.4-60.6 1.9-112.4 4.9-120.1 58.2-5.2 118.5 41.6 123.3 45.3 33.1-8.9 70.8-13.7 112.9-13.7 42.4.0 80.3 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.4-43.9 2.9 7.7 24.7 58.3 5.5 118.1 32.5 36.8 49 82.8 49 132.4.0 102.3-59 188.3-200.2 213.2 23.5 23.3 38.1 55.5 38.1 91.1v112.7c.8 9 0 17.9 15.1 17.9C832.7 877 960.4 709.4 960.4 512.1c0-247.5-200.6-447.9-447.9-447.9C265 64.1 64.6 264.5 64.6 512z"/></svg></a><a class="soft-size--primary soft-style--box" href target=_blank rel="noopener noreferrer"><svg class="icon icon-twitter" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M962.285714 233.142857q-38.285714 56-92.571429 95.428571.571429 8 .571429 24 0 74.285714-21.714286 148.285714t-66 142-105.428571 120.285714-147.428571 83.428571-184.571429 31.142857q-154.857143.0-283.428571-82.857143 20 2.285714 44.571429 2.285714 128.571429.0 229.142857-78.857143-60-1.142857-107.428571-36.857143t-65.142857-91.142857q18.857143 2.857143 34.857143 2.857143 24.571429.0 48.571429-6.285714-64-13.142857-106-63.714286t-42-117.428571v-2.285714q38.857143 21.714286 83.428571 23.428571-37.714286-25.142857-60-65.714286t-22.285714-88q0-50.285714 25.142857-93.142857 69.142857 85.142857 168.285714 136.285714t212.285714 56.857143q-4.571429-21.714286-4.571429-42.285714.0-76.571429 54-130.571429t130.571429-54q80 0 134.857143 58.285714 62.285714-12 117.142857-44.571429-21.142857 65.714286-81.142857 101.714286 53.142857-5.714286 106.285714-28.571429z"/></svg></a><a class="soft-size--primary soft-style--box" href target=_blank rel="noopener noreferrer"><svg class="icon icon-instagram" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 0C372.906667.0 355.541333.64 300.928 3.072 246.4 5.632 209.28 14.208 176.64 26.88c-33.664 13.056-62.250667 30.592-90.709333 59.050667S39.893333 142.933333 26.88 176.64C14.208 209.28 5.589333 246.4 3.072 300.928.512 355.541333.0 372.906667.0 512s.64 156.458667 3.072 211.072c2.56 54.485333 11.136 91.648 23.808 124.288a251.093333 251.093333.0 0059.050667 90.709333A250.368 250.368.0 00176.64 997.12c32.682667 12.629333 69.802667 21.290667 124.288 23.808C355.541333 1023.488 372.906667 1024 512 1024s156.458667-.64 211.072-3.072c54.485333-2.56 91.648-11.178667 124.288-23.808a251.648 251.648.0 0090.709333-59.050667A250.026667 250.026667.0 00997.12 847.36c12.629333-32.64 21.290667-69.802667 23.808-124.288 2.56-54.613333 3.072-71.978667 3.072-211.072s-.64-156.458667-3.072-211.072c-2.56-54.485333-11.178667-91.690667-23.808-124.288a251.306667 251.306667.0 00-59.050667-90.709333A249.472 249.472.0 00847.36 26.88C814.72 14.208 777.557333 5.589333 723.072 3.072 668.458667.512 651.093333.0 512 0zm0 92.16c136.661333.0 152.96.682667 206.933333 3.029333 49.92 2.346667 77.013333 10.624 95.018667 17.706667 23.978667 9.258667 40.96 20.352 58.965333 38.229333 17.877333 17.92 28.970667 34.944 38.229334 58.922667 6.997333 18.005333 15.36 45.098667 17.621333 95.018667C931.2 359.082667 931.754667 375.296 931.754667 512s-.64 152.96-3.157334 206.933333c-2.602667 49.92-10.922667 77.013333-17.962666 95.018667a162.56 162.56.0 01-38.357334 58.965333 159.744 159.744.0 01-58.88 38.229334c-17.92 6.997333-45.44 15.36-95.36 17.621333C663.68 931.2 647.68 931.754667 510.72 931.754667c-137.002667.0-153.002667-.64-207.317333-3.157334C253.44 925.994666 225.92 917.674666 208 910.634667a158.549333 158.549333.0 01-58.837333-38.357334 155.477333 155.477333.0 01-38.4-58.88c-7.04-17.92-15.317333-45.44-17.92-95.36-1.92-53.76-2.602667-70.357333-2.602667-206.677333.0-136.362667.682667-153.002667 2.602667-207.402667 2.602667-49.92 10.88-77.397333 17.92-95.317333 8.96-24.32 20.437333-40.96 38.4-58.922667C167.04 131.84 183.722667 120.32 208 111.402667 225.92 104.32 252.842667 96 302.762667 93.44c54.4-1.92 70.4-2.56 207.317333-2.56l1.92 1.28zm0 156.928a262.912 262.912.0 100 525.824 262.912 262.912.0 100-525.824zm0 433.578667c-94.293333.0-170.666667-76.373333-170.666667-170.666667S417.706666 341.333333 512 341.333333 682.666667 417.706666 682.666667 512 606.293334 682.666667 512 682.666667zM846.762667 238.72a61.482667 61.482667.0 01-122.88.0 61.44 61.44.0 01122.88.0z"/></svg></a></div><div class=colour-bar></div><p>Â© 2021 <a href>kagome</a>.</p><p>Powered by
<a href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a>
Theme -
<a href=https://github.com/miiiku/hugo-theme-kagome target=_blank rel="noopener noreferrer author">kagome</a></p><p><a href=javascript:; id=theme-light>ğŸŒ light</a>
<a href=javascript:; id=theme-dark>ğŸŒ› dark</a>
<a href=javascript:; id=theme-auto>ğŸ¤–ï¸ auto</a></p></footer></body></html>